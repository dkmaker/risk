<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Risk Dice Battle</title>
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Risk Dice">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#4a5d3a">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="./favicon.png">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/icon-180.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Styles -->
    <link rel="stylesheet" href="./src/styles.css">
</head>
<body>
    <div id="app"></div>
    
    <!-- Legacy HTML structure (will be migrated to Preact) -->
    <div id="legacy-app" style="display: none;">
    <div class="header">
        <button class="header-btn" onclick="goHome()">üè†</button>
        <div class="header-center" id="header-center">
            <span class="header-icon">üé≤</span>
        </div>
        <button class="header-btn" onclick="showSettings()">‚öôÔ∏è</button>
    </div>
    
    <div class="container">
        <div id="settings-screen" class="screen">
            <div class="screen-content">
                <h1 id="settings-title">Settings</h1>
                
                <div class="settings-section">
                    <h2 id="language-label">Language</h2>
                    <div class="language-buttons">
                        <button class="language-btn" onclick="changeLanguage('en')" data-lang="en">
                            <span id="english-lang-text">English</span>
                        </button>
                        <button class="language-btn" onclick="changeLanguage('da')" data-lang="da">
                            <span id="danish-lang-text">Dansk</span>
                        </button>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h2 id="players-label">Players</h2>
                    <button class="btn" onclick="editPlayers()" id="edit-players-btn">Edit Players</button>
                </div>
                
                <button class="btn" onclick="backToGame()" id="back-to-game-btn">Back to Game</button>
            </div>
        </div>
        
        <div id="player-setup" class="screen active">
            <div class="screen-content">
                <h1 id="player-setup-title">Risk Dice Battle</h1>
                <p style="margin-bottom: 30px;" id="player-setup-subtitle">Enter player names (leave blank to skip)</p>
                
                <div class="players-grid">
                <div class="player-color-card" data-color="#cc0000" style="background: #cc0000">
                    <input type="text" class="player-name-on-card" placeholder="Red Player" data-player="red">
                </div>
                <div class="player-color-card" data-color="#0066cc" style="background: #0066cc">
                    <input type="text" class="player-name-on-card" placeholder="Blue Player" data-player="blue">
                </div>
                <div class="player-color-card" data-color="#009900" style="background: #009900">
                    <input type="text" class="player-name-on-card" placeholder="Green Player" data-player="green">
                </div>
                <div class="player-color-card" data-color="#ffcc00" style="background: #ffcc00">
                    <input type="text" class="player-name-on-card" placeholder="Yellow Player" data-player="yellow">
                </div>
                <div class="player-color-card" data-color="#000000" style="background: #000000">
                    <input type="text" class="player-name-on-card" placeholder="Black Player" data-player="black">
                </div>
                <div class="player-color-card" data-color="#9b59b6" style="background: #9b59b6">
                    <input type="text" class="player-name-on-card" placeholder="Purple Player" data-player="purple">
                </div>
            </div>
            
                <button class="btn" onclick="savePlayersAndStart()" id="save-start-btn">Save & Start</button>
            </div>
        </div>

        <div id="attacker-selection" class="screen">
            <div class="screen-content">
                <h1 id="who-attacking">Who's Attacking?</h1>
                <div class="player-selection" id="player-selection-list">
                    <!-- Players will be dynamically added here -->
                </div>
            </div>
        </div>

        <div id="defender-selection" class="screen">
            <div class="screen-content">
                <h1 id="who-defending">Who's Defending?</h1>
                <div class="player-selection" id="defender-selection-list">
                    <!-- Players will be dynamically added here -->
                </div>
            </div>
        </div>

        <div id="setup-attacker" class="screen">
            <div class="screen-content">
                <h1><span id="attacking-player-name">Attacker</span></h1>
                <div class="army-selector">
                <label id="attacker-army-label">Number of armies to attack with</label>
                <div class="army-buttons" id="attacker-army-buttons">
                    <button class="army-btn" onclick="selectAttackerArmy(1)">1</button>
                    <button class="army-btn" onclick="selectAttackerArmy(2)">2</button>
                    <button class="army-btn" onclick="selectAttackerArmy(3)">3</button>
                    <button class="army-btn" onclick="selectAttackerArmy(4)">4</button>
                    <button class="army-btn" onclick="selectAttackerArmy(5)">5</button>
                    <button class="army-btn" onclick="selectAttackerArmy(6)">6</button>
                    <button class="army-btn" onclick="selectAttackerArmy(7)">7</button>
                    <button class="army-btn" onclick="selectAttackerArmy(8)">8</button>
                    <button class="army-btn" onclick="selectAttackerArmy(9)">9</button>
                    <button class="army-btn" onclick="changeAttackerPage(1)">&gt;</button>
                </div>
            </div>
            </div>
        </div>

        <div id="setup-defender" class="screen">
            <div class="screen-content">
                <h1><span id="defending-player-name">Defender</span></h1>
                <div class="army-selector">
                <label id="defender-army-label">Number of armies in territory</label>
                <div class="army-buttons" id="defender-army-buttons">
                    <button class="army-btn" onclick="selectDefenderArmy(1)">1</button>
                    <button class="army-btn" onclick="selectDefenderArmy(2)">2</button>
                    <button class="army-btn" onclick="selectDefenderArmy(3)">3</button>
                    <button class="army-btn" onclick="selectDefenderArmy(4)">4</button>
                    <button class="army-btn" onclick="selectDefenderArmy(5)">5</button>
                    <button class="army-btn" onclick="selectDefenderArmy(6)">6</button>
                    <button class="army-btn" onclick="selectDefenderArmy(7)">7</button>
                    <button class="army-btn" onclick="selectDefenderArmy(8)">8</button>
                    <button class="army-btn" onclick="selectDefenderArmy(9)">9</button>
                    <button class="army-btn" onclick="changeDefenderPage(1)">&gt;</button>
                </div>
            </div>
            </div>
        </div>

        <div id="battle-screen" class="screen">
            <div class="screen-content">
                <h1 id="battle-title">Battle!</h1>
            <div class="player-info">
                <div class="player-card" id="attacker-card">
                    <h3>Attacker</h3>
                    <div class="army-count" id="attacker-count">0</div>
                    <div class="battle-info" id="attacker-dice-info"></div>
                </div>
                <div class="player-card" id="defender-card">
                    <h3>Defender</h3>
                    <div class="army-count" id="defender-count">0</div>
                    <div class="battle-info" id="defender-dice-info"></div>
                </div>
            </div>

            <div class="dice-container" id="dice-display">
                <!-- Dice will be displayed here -->
            </div>

            <div class="result-message" id="result-message">
                Click Roll to start battle!
            </div>

            <div class="button-container">
                <button class="btn" onclick="rollDice()" id="roll-btn">Roll Dice</button>
                <button class="btn btn-secondary" onclick="withdraw()" id="withdraw-btn">Withdraw</button>
            </div>
            </div>
        </div>
    </div>
    </div>

    <script type="module" src="./src/main.tsx"></script>
</body>
</html>